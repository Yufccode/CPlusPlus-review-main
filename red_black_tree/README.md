
# 红黑树

红黑树详解博客: [CSDN-@背包-红黑树](https://blog.csdn.net/Yu_Cblog/article/details/128210260?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170521445016777224482790%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=170521445016777224482790&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-128210260-null-null.nonecase&utm_term=红黑树&spm=1018.2226.3001.4450)

红黑树的控制平衡：变色+旋转

## 红黑树的性质

1. 每个节点不是红色就是黑色

2. 根节点是黑色的

3. 如果一个节点是红色的，则它的两个孩子节点是黑色的（树中没有连续的红色节点）

4. 对于每个节点，从该节点到其所有后代叶节点的简单路径上，均包含相同数目的黑色节点

5. 每个叶子节点都是黑色的（叶子节点指的是空节点）（叶子节点也可以叫NIL节点）

## 默认插入的节点的颜色
默认插入红色的。
为什么？

因为如果插入黑色，那么就会违反规则4，规则4影响到了整棵树所有的简单路径，代价很大。
而插入红色，其实只违反规则3，规则三只是一个局部的问题。

遇事不决看叔叔

## 情况1: cur为红，p为红，g为黑，u存在且为红
![](https://img-blog.csdnimg.cn/8dd92fea331e4b3daca6646dc7d9b762.png)

tips：我们可以发现，这个情况是不需要看左右的，cur在p的左或右，处理的方式其实都是一样的。

## 情况2: cur为红，p为红，g为黑，u不存在/u为黑（且cur,p,g在同一直线上）

在情况一中，我们把父亲变黑的时候，可以把叔叔一起拉下水，让叔叔也变黑，这样我们就能保证路径上的黑色节点个数保持一致。**但是现在，叔叔不存在或叔叔已经是黑色的了，此时只能旋转了。**

![](https://img-blog.csdnimg.cn/90f4451c2e9f4e308c366f4cd75519fa.png)

**说明: u的情况有两种**

- 如果u节点不存在，则cur一定是新插入节点，因为如果cur不是新插入节点则cur和p一定有一个节点的颜色是黑色，就不满足性质4: 每条路径黑色节点个数相同

- 如果u节点存在，则其一定是黑色的，那么cur节点原来的颜色一定是黑色的现在看到其是红色的原因是因为cur的子树在调整的过程中将cur节点的颜色由黑色改成红色。

**p为g的左孩子，cur为p的左孩子，则进行右单旋转;**

**相反，p为g的右孩子，cur为p的右孩子，则进行左单旋转**

**p、g变色--p变黑，g变红 **

因为cur,p,g在同一直线上，所以情况二只需要单旋！下面这种情况三就需要双旋了！

## 情况三: cur为红，p为红，g为黑，u不存在/u为黑（且cur,p,g不在同一直线上）

![](https://img-blog.csdnimg.cn/c0f03eaa3665427fa776449ab9c28fa9.png)

**p为g的左孩子，cur为p的右孩子，则针对p做左单旋转;**

**p为g的右孩子，cur为p的左孩子，则针对p做右单旋转;**

**则转换成了情况2**